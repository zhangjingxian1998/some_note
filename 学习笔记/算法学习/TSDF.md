全称truncated signed distance function，基于截断的带符号距离函数，是一种常用的在3D重建中计算隐势面的方法。

![image-20221006215941954](D:/oneDrive/typr/image-20221006215941954.png)

TSDF是在SDF进行改进的，是在SDF提出了截断距离

# 基本思想

考虑传感器测量的不确定性，利用多次测量数据来实现更为精确的表面重构，从而使得地图更精确、障碍物（墙壁）更细、更薄

· 为障碍物表面建立 Signed Distance Function （有符号距离函数）

· 考虑到距离表面较远的点不会影响到表面重构，对其忽略不计

> #### SDF定义

$$
sdf_i(x)=laser_i(x)-dist_i(x)\\
$$

其中

$laser_i(x)$表示激光测量到表面的距离

$dist_i(x)$表示与激光同一条线上栅格距离传感器的距离

而$tdist_i(x)$是对$dist_i(x)$进行截断，限制在$[-1,1]$内

通过这个方法我们能够得到一个栅格场，里面每一个值都在$[-1,1]$内
$$
tsdf_i(x)=max(-1,min(1,\frac{sdf_i(x)}{t}))
$$
规定负数代表在表面内，正数代表在表面外。0表示在表面上

t是trunc表示阶段距离，人为设定，可理解为相机深度信息的误差值，如果误差越大，建议该值设置大一些，否则会丢掉很多深度相机获取的信息．

更新tsdf值
$$
tsdf_j=\frac{tsdf_{j-1}\dot\ w_{j-1}+tsdf_j \dot\ w_j}{w_{j-1}+w_j}
$$
初始$w_j$默认为1

更新权值
$$
w_j=w_{j-1}+w_{j}
$$
融合结束后找等值面